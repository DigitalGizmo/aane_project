{% extends "sources/entry_pop_base.html" %}
{% load static %}

{% block entry_pop_detail %}
  <div class="slim-info">
    <p class="slimpop-close">
      &larr; previous | 
      <a href="jrussell-popped-prince.html">next &rarr;</a>

      <a hx-target="#pop-div" hx-swap="delete"><span class="close"></span></a>

    </p>

    <h1 class="slim-title">{{ sourceentry.volume.primary_source.title|safe }}</h1>
    <!-- this seems redundant with info below <h3>Volume: 1763 - 1791 | Date: 1761 | (L22-521-002)</h3> -->
    
    <div class="slim-entry">
      <h4>Entry</h4>
      <p>{{ sourceentry.entry_text|safe }}</p>
    </div>

    <div class="slim-details">
      <h4>Details</h4>
      <dl>
        <dt>Source:</dt>
        <dd>{{ sourceentry.volume.primary_source.title|safe }}</dd>

        <dt>Volume:</dt>
        <dd>{{ sourceentry.volume.title|safe }}</dd>

        <dt>Date:</dt>
        <dd>
          {% firstof sourceentry.low_year "--" %} 
          {% if sourceentry.low_month %} 
            {{ sourceentry.get_low_month_display }}
          {% endif %}
          {% if sourceentry.low_day %} {{ sourceentry.low_day }}{% endif %}
        </dd>

        <dt>File:</dt>
        <dd>{{ sourceentry.image_name }}</dd>

        <dt>Entry:</dt>
        <dd>{{ sourceentry.entry_text|safe }}</dd>

        <dt>Monetary Transaction:</dt>
        <dd>
          {% if sourceentry.dollars %} 
          ${{ sourceentry.dollars }}
        {% else %}
          &pound;
          {% firstof sourceentry.pounds "0" %}/
          {% firstof sourceentry.shillings "0" %}/
          {% firstof sourceentry.pence "0" %}
          {% if sourceentry.farthing %}
            (f {{ farthing }})
          {% endif %}
        {% endif %}
  
        </dd>
      </dl>
    </div><!-- /slim-details -->
  </div><!-- /slim-info -->
  
  <div id="openseadragon1" style=" height: 80vh; background-color: #EEE;"></div> 
  
  <!-- <script src="{% static 'js/openseadragon.min.js' %}"></script> -->
  <script type="text/javascript">
    var viewer = OpenSeadragon({
      id: "openseadragon1",
      minZoomImageRatio: 0.8,
      maxZoomLevel: 1.3,
      prefixUrl: "{% static 'js/images/' %}",
      tileSources: "https://img.americancenturies.org/iiif/3/aane|{{ sourceentry.image_name }}.jp2/info.json"
    });
  </script>

{% endblock %}
